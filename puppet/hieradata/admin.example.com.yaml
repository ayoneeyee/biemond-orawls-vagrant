---
messageEnv: 'admin'

weblogic_apps:
  - one
  - two

orawls::weblogic::log_output:   true

orautils::osDomainParam:          "Wls1036"
orautils::osDomainPathParam:      "/opt/oracle/wlsdomains/domains/Wls1036"
#orautils::osDomainPathParam:      "/opt/oracle/middleware11g/user_projects/domains/Wls1036"

orautils::nodeMgrAddressParam:    '10.10.10.10'

orautils::wlsPasswordParam:       "weblogic1"
orautils::wlsAdminServerParam:    "AdminServer"


logoutput:                     &logoutput                     true

wls_os_user:              &wls_os_user              "wls"
wls_weblogic_user:        &wls_weblogic_user        "weblogic"
wls_weblogic_home_dir:    &wls_weblogic_home_dir    "/opt/oracle/middleware11g/wlserver_10.3"
wls_middleware_home_dir:  &wls_middleware_home_dir  "/opt/oracle/middleware11g"


# when you have just one domain on a server
domain_name:                "Wls1036"
domain_adminserver:         "AdminServer"
domain_adminserver_address: "10.10.10.10"
domain_adminserver_port:    7001
domain_nodemanager_port:    5556
domain_wls_password:        &domain_wls_password      "weblogic1"
domain_user_config_file:    "/home/wls/wls-Wls1036-WebLogicConfig.properties"
domain_user_key_file:       "/home/wls/wls-Wls1036-WebLogicKey.properties"

# create a standard domain
domain_instances:
  'Wls1036':
     domain_template:          "standard"
     development_mode:         false
     log_output:               *logoutput
  'Wls1036_2':
     domain_template:          "standard"
     development_mode:         false
     log_output:               *logoutput
     domain_name:              'Wls1036_2'
     adminserver_port:         7011

wls_setting_instances:
  'default':
    user:               *wls_os_user
    weblogic_home_dir:  *wls_weblogic_home_dir
    connect_url:        "t3://10.10.10.10:7001"
    weblogic_user:      *wls_weblogic_user
    weblogic_password:  *domain_wls_password
  'domain2':
    user:               *wls_os_user
    weblogic_home_dir:  *wls_weblogic_home_dir
    connect_url:        "t3://10.10.10.10:7011"
    weblogic_user:      *wls_weblogic_user
    weblogic_password:  *domain_wls_password

# FMW installation on top of WebLogic 10.3.6
# fmw_installations:
#   'soaPS6':
#     fmw_product:             "soa"
#     fmw_file1:               "ofm_soa_generic_11.1.1.7.0_disk1_1of2.zip"
#     fmw_file2:               "ofm_soa_generic_11.1.1.7.0_disk1_2of2.zip"
#     log_output:              true
#     remote_file:             false
#   'osbPS6':
#     fmw_product:             "osb"
#     fmw_file1:               "ofm_osb_generic_11.1.1.7.0_disk1_1of1.zip"
#     log_output:              true
#     remote_file:             false

# opatch_instances:
#   '17584181':
#      oracle_product_home_dir:  "/opt/oracle/middleware11g/Oracle_SOA1"
#      patch_id:                 "17584181"
#      patch_file:               "p17584181_111170_Generic.zip"
#      remote_file:              false


user_instances:
  'testuser1':
    ensure:                 'present'
    password:               'weblogic1'
    authenticationprovider: 'DefaultAuthenticator'
    realm:                  'myrealm'
    description:            'my test user'
  'testuser2':
    ensure:                 'present'
    password:               'weblogic1'
    authenticationprovider: 'DefaultAuthenticator'
    realm:                  'myrealm'
    description:            'my test user'
  'testuser3':
    ensure:                 'present'
    password:               'weblogic1'
    authenticationprovider: 'DefaultAuthenticator'
    realm:                  'myrealm'
    description:            'my test user'
  'domain2/testuser3':
    ensure:                 'present'
    password:               'weblogic1'
    authenticationprovider: 'DefaultAuthenticator'
    realm:                  'myrealm'
    description:            'my test user'

group_instances:
  'TestGroup':
    ensure:                 'present'
    authenticationprovider: 'DefaultAuthenticator'
    description:            'My TestGroup'
    realm:                  'myrealm'
    users:                  'testuser1,testuser2'
  'SuperUsers':
    ensure:                 'present'
    authenticationprovider: 'DefaultAuthenticator'
    description:            'SuperUsers'
    realm:                  'myrealm'
    users:                  'testuser2'
  'domain2/TestGroup':
    ensure:                 'present'
    authenticationprovider: 'DefaultAuthenticator'
    description:            'SuperUsers'
    realm:                  'myrealm'
    users:                  'testuser3'

authentication_provider_instances:
  'DefaultAuthenticator':
    ensure:             'present'
    control_flag:       'SUFFICIENT'
  'ldap':
    ensure:             'present'
    control_flag:       'SUFFICIENT'
    providerclassname:  'weblogic.security.providers.authentication.LDAPAuthenticator'
    attributes:         'Principal;Host;Port;CacheTTL;CacheSize;MaxGroupMembershipSearchLevel;SSLEnabled'
    attributesvalues:   'ldapuser;ldapserver;389;60;1024;4;true'

# pack domains
pack_domain_instances:
  'wlsDomain':
     log_output:           *logoutput

# create and startup the nodemanager
nodemanager_instances:
  'nodemanager':
     log_output:           *logoutput
     # nodemanager_address:  "10.10.10.10"

# startup adminserver for extra configuration
control_instances:
  'startWLSAdminServer':
     domain_name:          "Wls1036"
     server_type:          'admin'
     target:               'Server'
     server:               'AdminServer'
     action:               'start'
     log_output:           *logoutput
  'startWLSAdminServer2':
     domain_name:          "Wls1036_2"
     server_type:          'admin'
     target:               'Server'
     server:               'AdminServer'
     action:               'start'
     adminserver_port:     7011
     log_output:           *logoutput

# create password file for WLST utility
userconfig_instances:
  'Wls12c':
     log_output:           *logoutput
     user_config_dir:      '/home/wls'

# create 2 machines
machines_instances:
  'Node1':
    ensure:         'present'
    listenaddress:  '10.10.10.100'
    listenport:     '5556'
    machinetype:    'UnixMachine'
    nmtype:         'SSL'
  'Node2':
    ensure:         'present'
    listenaddress:  '10.10.10.200'
    listenport:     '5556'
    machinetype:    'UnixMachine'
    nmtype:         'SSL'
  'domain2/Node1':
    ensure:         'present'
    listenaddress:  '10.10.10.100'
    listenport:     '5557'
    machinetype:    'UnixMachine'
    nmtype:         'SSL'
  'domain2/Node2':
    ensure:         'present'
    listenaddress:  '10.10.10.200'
    listenport:     '5557'
    machinetype:    'UnixMachine'
    nmtype:         'SSL'

file_persistence_folders:
   '/opt/oracle/wlsdomains/domains/Wls1036/persistence1':
      ensure:     directory
      recurse:    false
      replace:    false
      mode:       '0775'
      owner:      'wls'
      group:      'dba'
   '/opt/oracle/wlsdomains/domains/Wls1036/persistence2':
      ensure:     directory
      recurse:    false
      replace:    false
      mode:       '0775'
      owner:      'wls'
      group:      'dba'
   '/opt/oracle/wlsdomains/domains/Wls1036/persistenceSaf1':
      ensure:     directory
      recurse:    false
      replace:    false
      mode:       '0775'
      owner:      'wls'
      group:      'dba'
   '/opt/oracle/wlsdomains/domains/Wls1036_2/persistence1':
      ensure:     directory
      recurse:    false
      replace:    false
      mode:       '0775'
      owner:      'wls'
      group:      'dba'
   '/opt/oracle/wlsdomains/domains/Wls1036_2/persistence2':
      ensure:     directory
      recurse:    false
      replace:    false
      mode:       '0775'
      owner:      'wls'
      group:      'dba'

